import{_ as n,c as l,a as s,b as o,t as p,d as e,o as t}from"./app.015f9862.js";const m=JSON.parse('{"title":".isFlagEnabled","description":"","frontmatter":{"title":".isFlagEnabled","order":0},"headers":[{"level":3,"title":"Combining Flags","slug":"combining-flags","link":"#combining-flags","children":[]},{"level":3,"title":"Checking Flags","slug":"checking-flags","link":"#checking-flags","children":[]}],"relativePath":"api-server/utility/isflagenabled.md"}'),c={name:"api-server/utility/isflagenabled.md"},r={id:"frontmatter-title",tabindex:"-1"},D=s("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),i=e(`<p>A bitwise flag allows us to lower the footprint in-memory of complex logic by simply making it a single enum with lots of options we can combine together.</p><p>There a tons of examples out there on the subject but let&#39;s try to simplify it by giving you GTA:V based logic to understand what is happening.</p><p>Let&#39;s take a look at the Animation Flags for example.</p><h3 id="combining-flags" tabindex="-1">Combining Flags <a class="header-anchor" href="#combining-flags" aria-hidden="true">#</a></h3><div class="language-typescript"><button class="copy"></button><span class="lang">typescript</span><pre><code><span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ANIMATION_FLAGS</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    NORMAL </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    REPEAT </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    STOP_LAST_FRAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    UPPERBODY_ONLY </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">16</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    ENABLE_PLAYER_CONTROL </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">32</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>When you want to create an animation with a specific set of rules you need to understand how these flags work. The above is a &#39;bitwise&#39; flag type of enum.</p><p>Let&#39;s say we want an animation to <code>REPEAT</code> but we also want it to be the <code>UPPERBODY_ONLY</code>. This means that we need to combine the flags to get our results.</p><p>There are two ways we can do this.</p><h4 id="adding-them-together" tabindex="-1">Adding Them Together <a class="header-anchor" href="#adding-them-together" aria-hidden="true">#</a></h4><div class="language-typescript"><button class="copy"></button><span class="lang">typescript</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> upperAndRepeated </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">16</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="using-bitwise-operators-to-combine" tabindex="-1">Using Bitwise Operators to Combine <a class="header-anchor" href="#using-bitwise-operators-to-combine" aria-hidden="true">#</a></h4><div class="language-typescript"><button class="copy"></button><span class="lang">typescript</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> flags </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ANIMATION_FLAGS</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">REPEAT </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> ANIMATION_FLAGS</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">UPPERBODY_ONLY</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p><em>I&#39;m sure you can imagine which one is the most commonly used.</em></p><h3 id="checking-flags" tabindex="-1">Checking Flags <a class="header-anchor" href="#checking-flags" aria-hidden="true">#</a></h3><p>Let&#39;s do another example using the default Admin permissions.</p><div class="language-typescript"><button class="copy"></button><span class="lang">typescript</span><pre><code><span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">PERMISSIONS</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    NONE </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    VIP </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    MODERATOR </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    ADMIN </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// Do Not Exceed 33 Entries</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>Let&#39;s say we want a function to only be allowed for admins and we&#39;re passing a permission level from the client to check that flag.</p><div class="language-typescript"><button class="copy"></button><span class="lang">typescript</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> permissionLevel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Let&#39;s check if the permissionLevel is an admin.</span></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">Athena</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">utility</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isFlagEnabled</span><span style="color:#A6ACCD;">(permissionLevel</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> PERMISSIONS</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ADMIN)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Not high enough rank</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">High enough rank</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>If you want to check for multiple levels, we can combine ranks again.</p><div class="language-typescript"><button class="copy"></button><span class="lang">typescript</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> whatToCheck </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> PERMISSIONS</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ADMIN </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> PERMISSIONS</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">MODERATOR</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">Athena</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">utility</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isFlagEnabled</span><span style="color:#A6ACCD;">(whatToCheck</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> PERMISSIONS</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ADMIN)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Not admin, or moderator</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">admin or mod!</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div>`,20);function y(a,F,A,C,d,h){return t(),l("div",null,[s("h1",r,[o(p(a.$frontmatter.title)+" ",1),D]),i])}const u=n(c,[["render",y]]);export{m as __pageData,u as default};
